# DB Relation

## 네 가지 기본적인 관계
### 데이터베이스 Table간 관계에 대한 개념 잡기
기본적으로 아래 네 가지 관계로 설명할 수 있다.

0. **관계 없음**

1. **1:1**
    - 유일하게 연결되어 있기 때문에 반대쪽 데이터에 접근이 가능하다.
    - ex) 이름-주민번호: 주민번호를 찾으면 이름을 찾을 수 있고, 반대로 이름을 가지고 주민번호를 찾을 수 있다.

2. **1:N / One to Many**
    - **1 has many / N belongs to**: 1:N 관계는 종속 관계이다.
    - 거의 모든 데이터는 1:N 관계로 이루어져 있다. (=종속관계) post-comments 테이블의 관계와 같이 여러 개의 레코드가 한 레코드와 연결되는 형태를 가진다.

3. **M:N / Many to Many**
    - (추후 보완) 기본적으로 1:N 관계를 구성하여 쌓아올린다.

### 예시) 반-학생 테이블

#### 관계 없음
- 각 테이블에 칼럼을 추가하면 모든 정보를 한 테이블에 표시할 수 있다. 아래 두 테이블의 경우 `학생 정보-반`, `반 정보-소속학생`을 추가하여 정보를 표시하였다.
- 이렇게 데이터를 추가할 경우 두 테이블의 관계는 존재하지 않는다.

**학생정보 테이블**

| id   | 이름   | 전공     | 이메일  | 전화번호    | **반**  |
| ---- | ------ | -------- | ------- | ----------- | ------- |
|      | 김건호 | 기계/A&T | a@a.com | 01012345678 | 서울1반 |

**반 정보 테이블**

| id   | 반   | 담당   | **소속학생** | 강의실 |
| ---- | ---- | ------ | ------------ | ------ |
|      | 1    | 강동주 | ...          | 701    |

- 이렇게 표현할 경우 데이터를 수정할 때 두 테이블의 정보를 모두 접근하여 바꿔주어야 한다. 이는 데이터를 참조, 변경하는 등의 작업을 할 때 매우 비효율적이므로, 다음 예시와 같이 1:N 관계를 만들어주어야 한다.

#### 1:N: Primary Key-Foriegn Key
- `1`에 대한 정보를 `N`쪽에 새로 추가한다. 아래 테이블의 학생 정보 테이블에는 반 id를 가지도록 하였고, 반 정보 테이블의 소속 학생 칼럼은 삭제하였다.

**`N` -학생 정보 테이블**

| id   | 이름   | 전공     | 이메일  | 전화번호    | 반 id(FK) |
| ---- | ------ | -------- | ------- | ----------- | --------- |
| 1    | 김건호 | 기계/A&T | a@a.com | 01012345678 | 1         |

**`1` -반 정보 테이블**

| id(PK) | 반   | 담당   | 강의실 |
| ------ | ---- | ------ | ------ |
| 1      | 1    | 강동주 | 701    |

- 1:N의 N쪽에서 자신이 속한 곳(1)의 정보를 가지고 있으면 데이터 관리의 코스트를 드라마틱하게 줄일 수 있다.

- 이 때 각각의 유일성을 보장할 수 있는 식별자를 **1: PK(Primary Key) --- N: FK(외래 키Foreign Key)**라고 한다.
